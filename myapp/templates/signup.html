{% extends "index.html" %}
{% load static %}
{% block main %}

<section class="upload-section">
  <div class="upload-card" style="max-width: 450px; margin: 0 auto;">
    <h3 class="mb-3">Create your NoteGenius account</h3>
    <p class="text-muted mb-4">
      Sign up to start generating smart notes, QnA, and quizzes.
    </p>

    <!-- optional error block (future backend ke liye) -->
    {% if error %}
    <div class="alert alert-danger">
      {{ error }}
    </div>
    {% endif %}

    <form method="post">
      {% csrf_token %}

      <div class="mb-3 text-start">
        <label class="form-label fw-semibold text-secondary" for="username">
          Username
        </label>
        <input
          type="text"
          class="form-control"
          id="username"
          name="username"
          placeholder="Choose a username"
          required
        />
      </div>

      <div class="mb-3 text-start">
        <label class="form-label fw-semibold text-secondary" for="email">
          Email
        </label>
        <input
          type="email"
          class="form-control"
          id="email"
          name="email"
          placeholder="Enter your email"
          required
        />
      </div>

      <div class="mb-3 text-start">
        <label class="form-label fw-semibold text-secondary" for="phone">
          Mobile number (optional)
        </label>
        <input
          type="tel"
          class="form-control"
          id="phone"
          name="phone"
          placeholder="Enter your mobile number"
        />
      </div>

      <!-- OTP section -->
      <div class="mb-3 text-start">
        <label class="form-label fw-semibold text-secondary">
          Verify with OTP
        </label>
        <div class="d-flex gap-2 mb-2">
          <button
            type="button"
            id="signupSendOtp"
            class="btn btn-sm btn-outline-primary"
          >
            Send OTP
          </button>
          <span
            id="signupOtpStatus"
            class="small text-muted align-self-center"
          >
            OTP will be sent to your email / mobile.
          </span>
        </div>

        <input
          type="text"
          class="form-control"
          id="signupOtpInput"
          name="otp"
          placeholder="Enter OTP"
          maxlength="6"
          disabled
        />
      </div>

      <div class="mb-3 text-start">
        <label class="form-label fw-semibold text-secondary" for="password1">
          Password
        </label>
        <input
          type="password"
          class="form-control"
          id="password1"
          name="password1"
          placeholder="Create a password"
          required
        />
      </div>

      <div class="mb-3 text-start">
        <label class="form-label fw-semibold text-secondary" for="password2">
          Confirm Password
        </label>
        <input
          type="password"
          class="form-control"
          id="password2"
          name="password2"
          placeholder="Re-enter your password"
          required
        />
      </div>

      <button type="submit" class="generate-btn w-100">
        <i class="fas fa-user-plus me-2"></i>
        Sign up
      </button>
    </form>

    <p class="mt-3 text-center">
      Already have an account?
      <a href="{% url 'login' %}">Login</a>
    </p>
  </div>
</section>

<script>
  // FRONTEND ONLY â€“ fake OTP flow
  const signupSendOtpBtn = document.getElementById("signupSendOtp");
  const signupOtpInput = document.getElementById("signupOtpInput");
  const signupOtpStatus = document.getElementById("signupOtpStatus");

  if (signupSendOtpBtn) {
    signupSendOtpBtn.addEventListener("click", function () {
      // yahan baad me actual API call kar sakte ho
      signupOtpInput.disabled = false;
      signupOtpInput.focus();
      signupOtpStatus.textContent =
        "Dummy: OTP sent! (Frontend only, backend baad me connect hoga)";
      signupOtpStatus.classList.remove("text-muted");
      signupOtpStatus.classList.add("text-success");
    });
  }
</script>

{% endblock %}
