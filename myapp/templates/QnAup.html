{% extends "index.html" %} {% load static %} {% block main %}

<section class="container upload-section">
  <div class="container">
    <div class="upload-card">
      <h3 class="mb-2 text-center">Upload to Generate Question and Answers</h3>
      <p class="text-center text-muted px-2">
        Paste your content or upload a file. Our AI will summarize and generate
        Q&A notes for you.
      </p>

      <!-- QnA Upload Form -->
      <form id="qnaUploadForm" enctype="multipart/form-data">
        <!-- Upload section -->
        <div class="drop-area mt-3">
          <i class="fas fa-file-circle-question"></i>
          <h6 class="mt-2">Drag & Drop your file here</h6>
          <p class="text-muted small">
            Supports PDFs, Docs, Images, Audio, Video, PPTs.
          </p>
          <p class="text-muted small">or click below to select</p>

          <input
            type="file"
            class="form-control mt-2"
            id="qnaFileInput"
            multiple
            accept=".pdf,.doc,.docx,.txt,.ppt,.pptx,image/*,audio/*,video/*"
          />
        </div>

        <!-- Text input -->
        <div class="my-3 text-start">
          <label class="form-label fw-semibold text-secondary">
            Or paste your text below:
          </label>

          <textarea
            class="form-control"
            id="qnaTextInput"
            rows="6"
            placeholder="Paste your content here..."
          ></textarea>
        </div>

        <!-- Button -->
        <button type="submit" class="generate-btn w-100">
          <i class="fas fa-wand-magic-sparkles me-2"></i>
          Generate QnA
        </button>
      </form>

      <!-- Result -->
      <div class="result-section d-none" id="qnaResultSection">
        <h5 class="mt-4">
          <i class="fas fa-circle-question me-2"></i> Generated QnA Notes:
        </h5>

        <div id="qnaOutput" class="mt-2"></div>

        <button
          type="button"
          id="downloadPdfBtn"
          class="btn btn-outline-secondary mt-3 w-100"
          disabled
        >
          <i class="fas fa-download me-2"></i>
          Download QnA as PDF
        </button>
      </div>
    </div>
  </div>
</section>

<script>
  const qnaForm = document.getElementById("qnaUploadForm");
  const resultSection = document.getElementById("qnaResultSection");
  const downloadBtn = document.getElementById("downloadPdfBtn");
  const qnaOutput = document.getElementById("qnaOutput");

  qnaForm.addEventListener("submit", function (e) {
    e.preventDefault();

    resultSection.classList.remove("d-none");
    downloadBtn.disabled = false;

    if (!qnaOutput.innerHTML.trim()) {
      qnaOutput.innerHTML = `
        <p class="mt-2">
          <strong>Example Q1:</strong> What is the main idea of the content?<br />
          <strong>Answer:</strong> The main idea will appear here.
        </p>`;
    }
  });

  downloadBtn.addEventListener("click", function () {
    alert("PDF download will work after backend integration.");
  });
</script>

{% endblock %}
