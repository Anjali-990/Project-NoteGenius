{% extends "index.html" %} {% load static %} {% block main %}

<section class="settings-section">
  <div
    class="upload-card settings-card"
    style="max-width: 900px; margin: 24px 40px 32px 480px"
  >
    <h2 class="text-center mb-4">Settings</h2>

    <div class="row g-4">
      <!-- LEFT: ACCOUNT -->
      <div class="col-md-5">
        <div class="card h-100 shadow-sm">
          <div class="card-body">
            <h5 class="mb-3">Account</h5>
            <p class="text-muted small mb-3">
              Manage your NoteGenius account details and security.
            </p>

            <div class="d-grid gap-2">
              <button class="btn btn-outline-primary">
                <i class="fas fa-lock me-2"></i> Change Password
              </button>
              <button class="btn btn-outline-primary">
                <i class="fas fa-user-edit me-2"></i> Change Username
              </button>
              <button class="btn btn-outline-danger">
                <i class="fas fa-user-times me-2"></i> Delete Account
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- RIGHT: PRIVACY + NOTIFICATIONS + THEME -->
      <div class="col-md-7">
        <div class="card h-100 shadow-sm">
          <div class="card-body">
            <!-- Privacy -->
            <h5 class="mb-3">Privacy</h5>

            <div class="d-flex justify-content-between align-items-center mb-3">
              <div>
                <div>Profile Visibility</div>
                <small class="text-muted"
                  >Control who can see your profile.</small
                >
              </div>
              <label class="ng-switch">
                <input type="checkbox" checked />
                <span class="ng-slider ng-round"></span>
              </label>
            </div>

            <button class="btn btn-outline-warning w-100 mb-4">
              <i class="fas fa-trash-alt me-2"></i> Clear All Saved Notes
            </button>

            <hr />

            <!-- Notifications -->
            <h5 class="mb-3">Notifications</h5>

            <div class="d-flex justify-content-between align-items-center mb-3">
              <div>
                <div>Email Notifications</div>
                <small class="text-muted"
                  >Get updates and tips in your inbox.</small
                >
              </div>
              <label class="ng-switch">
                <input type="checkbox" checked />
                <span class="ng-slider ng-round"></span>
              </label>
            </div>

            <div class="d-flex justify-content-between align-items-center mb-4">
              <div>
                <div>Push Notifications</div>
                <small class="text-muted"
                  >Show alerts while using NoteGenius.</small
                >
              </div>
              <label class="ng-switch">
                <input type="checkbox" />
                <span class="ng-slider ng-round"></span>
              </label>
            </div>

            <hr />

            <!-- Appearance / Theme -->
            <h5 class="mb-3">Appearance</h5>
            <p class="text-muted small mb-2">
              Choose how NoteGenius looks on your device.
            </p>

            <div class="row">
              <div class="col-12 col-sm-4 mb-2">
                <div class="form-check">
                  <input
                    class="form-check-input theme-radio"
                    type="radio"
                    name="theme"
                    id="themeLight"
                    value="light"
                  />
                  <label
                    class="form-check-label appearance-label"
                    for="themeLight"
                  >
                    Light
                  </label>
                </div>
              </div>
              <div class="col-12 col-sm-4 mb-2">
                <div class="form-check">
                  <input
                    class="form-check-input theme-radio"
                    type="radio"
                    name="theme"
                    id="themeDark"
                    value="dark"
                  />
                  <label
                    class="form-check-label appearance-label"
                    for="themeDark"
                  >
                    Dark
                  </label>
                </div>
              </div>
              <div class="col-12 col-sm-4 mb-2">
                <div class="form-check">
                  <input
                    class="form-check-input theme-radio"
                    type="radio"
                    name="theme"
                    id="themeSystem"
                    value="system"
                  />
                  <label
                    class="form-check-label appearance-label"
                    for="themeSystem"
                  >
                    System default
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Styling -->
<style>
  .settings-section {
    padding: 0;
  }

  /* toggle switch */
  .ng-switch {
    position: relative;
    display: inline-block;
    width: 46px;
    height: 24px;
  }

  .ng-switch input {
    display: none;
  }

  .ng-slider {
    position: absolute;
    cursor: pointer;
    inset: 0;
    background-color: #ccc;
    transition: 0.3s;
    border-radius: 24px;
  }

  .ng-slider:before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 3px;
    bottom: 3px;
    background-color: #fff;
    transition: 0.3s;
    border-radius: 50%;
  }

  .ng-switch input:checked + .ng-slider {
    background-color: #0d6efd;
  }

  .ng-switch input:checked + .ng-slider:before {
    transform: translateX(22px);
  }

  .ng-slider.ng-round {
    border-radius: 24px;
  }

  .ng-slider.ng-round:before {
    border-radius: 50%;
  }

  /* theme text always visible */
  .appearance-label {
    margin-left: 4px;
    font-size: 0.95rem;
  }

  body.theme-dark .appearance-label {
    color: #f8f9fa;
  }

  body.theme-light .appearance-label {
    color: #212529;
  }

  /* basic dark mode styles */
  body.theme-dark {
    background-color: #0b1622;
    color: #f8f9fa;
  }

  body.theme-dark .upload-card,
  body.theme-dark .settings-card {
    background-color: #152238;
    color: #f8f9fa;
  }

  body.theme-dark .card {
    background-color: #1b2940;
    border-color: #243654;
  }

  body.theme-dark .card .text-muted {
    color: #cbd5f5 !important;
  }

  body.theme-dark a {
    color: #e2e8ff;
  }

  body.theme-light {
    background-color: #eef4ff;
    color: #212529;
  }
</style>

<!-- Theme toggle JS -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const radios = document.querySelectorAll(".theme-radio");

    function getSystemTheme() {
      return window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches
        ? "dark"
        : "light";
    }

    function applyTheme(theme) {
      const body = document.body;
      body.classList.remove("theme-light", "theme-dark");

      if (theme === "light") {
        body.classList.add("theme-light");
      } else if (theme === "dark") {
        body.classList.add("theme-dark");
      } else if (theme === "system") {
        const sys = getSystemTheme();
        body.classList.add("theme-" + sys);
      }
    }

    const saved = localStorage.getItem("ng-theme") || "system";
    applyTheme(saved);

    const activeRadio = document.querySelector(
      '.theme-radio[value="' + saved + '"]'
    );
    if (activeRadio) {
      activeRadio.checked = true;
    }

    radios.forEach((radio) => {
      radio.addEventListener("change", function () {
        const value = this.value;
        localStorage.setItem("ng-theme", value);
        applyTheme(value);
      });
    });

    if (window.matchMedia) {
      window
        .matchMedia("(prefers-color-scheme: dark)")
        .addEventListener("change", () => {
          const current = localStorage.getItem("ng-theme") || "system";
          if (current === "system") {
            applyTheme("system");
          }
        });
    }
  });
</script>

{% endblock %}
